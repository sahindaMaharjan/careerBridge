@using Microsoft.AspNetCore.Identity
@using careerBridge.Areas.Identity.Data
@inject UserManager<careerBridgeUser> UserManager
@inject SignInManager<careerBridgeUser> SignInManager

@{
    ViewData["Title"] = "Mentor Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var currentUser = await UserManager.GetUserAsync(User);
    var username = currentUser?.Fullname ?? "Mentor";
}

<link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.0/dist/flatly/bootstrap.min.css" rel="stylesheet" />

<div class="container mt-5">
    <!-- Header -->
    <div class="text-center mb-5">
        <h1 class="display-5 fw-bold text-primary">Welcome, @username!</h1>
        <p class="lead text-secondary">Manage your mentees, schedule sessions, and share your expertise.</p>
    </div>

    <!-- Quick Navigation Buttons -->
    <div class="mb-4 text-center">
        <a asp-controller="Mentor" asp-action="Sessions" class="btn btn-outline-primary me-2">
            <i class="bi bi-calendar-event me-1"></i> Your Sessions
        </a>
        <a asp-controller="Mentor" asp-action="CreateSession" class="btn btn-outline-success me-2">
            <i class="bi bi-plus-circle me-1"></i> Create Session
        </a>
        <a asp-controller="BookMentor" asp-action="Index" class="btn btn-outline-secondary me-2">
            <i class="bi bi-people-fill me-1"></i> View Mentees
        </a>
        <a asp-controller="Chat" asp-action="Index" class="btn btn-outline-info">
            <i class="bi bi-chat-dots me-1"></i> Chat Inbox
        </a>
    </div>

    <div class="row">
        <!-- Mentee List -->
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Your Mentees</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">Swikrit Khatiwada</li>
                        <li class="list-group-item">Aayush Sharma</li>
                        <li class="list-group-item">Priya Raut</li>
                        <li class="list-group-item text-muted">+ View All</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Upcoming Sessions -->
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">Upcoming Sessions</h5>
                </div>
                <div class="card-body">
                    <p><strong>With:</strong> Priya Raut</p>
                    <p><strong>Date:</strong> June 20, 2025</p>
                    <p><strong>Time:</strong> 3:00 PM – 4:00 PM</p>
                    <a asp-controller="Mentor" asp-action="CreateSession" class="btn btn-outline-success w-100">
                        Schedule New Session
                    </a>
                </div>
            </div>
        </div>

        <!-- Review Applications -->
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">Applications to Review</h5>
                </div>
                <div class="card-body">
                    <p>3 new applications need your feedback.</p>
                    <a asp-controller="Mentor" asp-action="ManageRegistrations" asp-route-id="0" class="btn btn-outline-info w-100">
                        Review Now
                    </a>
                    @* Replace asp-route-id="0" with a real sessionId or list sessions *@
                </div>
            </div>
        </div>
    </div>

    <!-- Additional Panel -->
    <div class="row mt-4">
        <div class="col">
            <div class="card shadow-sm">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0">Mentor Resources</h5>
                </div>
                <div class="card-body">
                    <ul>
                        <li><a href="#">Mentorship Guidelines</a></li>
                        <li><a href="#">How to Provide Feedback</a></li>
                        <li><a href="#">Communication Tips</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
